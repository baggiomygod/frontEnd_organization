# 指令系统 P14

- 计算机指令的组成： 一条指令由**操作码**和**操作数**两部分组成，操作码决定要完成的操作，操作数指参与加运算的数据及其所在的单元地址
- 在计算机中，**操作要求（操作码）**和**操作数（地址码）**地址都是二进制数码表示，分别称为操作码和地址码，整条指令以二进制编码的行驶存放在存储器中
- 计算机指令执行过程：**取指令---分析指令--执行指令**三个步骤；

## 指令的寻址方式

- 顺序寻址
- 跳跃寻址

### 指令操作数的寻址方式

- 立即寻址方式
- 直接寻址方式
- 间接寻址方式
- 寄存器寻址方式

## CISC和RISC

### CISC（复杂）

兼容性强，指令繁多，长度可变，由微程序实现

1. 指令：数量多，使用频率差别大，可变长格式
2. 寻址方式：支持多种
3. 实现方式：微程序控制技术（微码）
4. 其他：研制周期长

### RISC（精简）

指令少，使用频率接近， 定长格式，大部分为单周期指令，操作寄存器，值由Load/Store操作内存，主要依靠硬件实现

1. 指令：数量少，使用频率接近，定长格式，大部分为单周指令，操作寄存器，只有Load/Store操作内存
2. 寻址方式：支持方式少
3. **实现方式**：增加了通用寄存器；硬布线逻辑控制为主；适合采用流水线 ✨
4. 其他：优化编译，有效支持高级语言

### 流水线 P16

取指---分析---执行

#### 流水线计算

1. 流水线周期为执行时间最长的一段： 假设：取指：2ns, 分析：2ns 执行：1ns 流水线周期为：2ns

   100条指令执行事件： 理论公式：
   (2ns + 2ns + 2ns) + (100 - 1)*2ns = 204

   12 + 5 3条 理论： 5 + (3 - 1) * 2 = 9 实践：
   (3 + 2) * 2 = 10

#### 流水线吞吐率计算

流水线吞吐率（TP）是指在单位时间内流水线所完成的任务数量或输出的结果数量。

公式： TP = 指令条数 / 流水线执行时间

流水线最大吞吐率： TPmax = Lim n / (k+n-1)t = 1/t

#### 流水线加速比计算

完成同样一批任务，不使用流水线所用的时间与使用流水线所用的时间称为流水线的加速比。

公式： S = 不使用流水线执行时间 / 使用流水线执行时间

假设 一条指定时间为(2n + 2n + 1n) = 5n, 共100条

流水线加速比 = 5 * 100 / 5 + 99 * 2 = 500 / 203

#### 流水线的效率

流水线的效率是指流水线的设备利用率。

在时空图上，流水线的效率定义为n个任务占用的时空与k个流水段总的时空去之比

